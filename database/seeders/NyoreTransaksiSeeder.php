<?php

namespace Database\Seeders;

use Illuminate\Database\Console\Seeds\WithoutModelEvents;
use Illuminate\Database\Seeder;
use App\Models\Transaksi;
use Carbon\Carbon;

class NyoreTransaksiSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Clear existing Nyore transactions first
        Transaksi::where('brand', 'LIKE', '%Nyore%')->delete();

        // Data transaksi Nyore untuk tahun 2024 dan 2025
        // Index array dimulai dari 0 = tanggal 1, index 1 = tanggal 2, dst
        $nyoreData = [
            // Januari 2024 (31 hari)
            '2024-01' => [
                9541000, 5485000, 3904000, 2441000, 4532000, 6333000, 4321000, 3014000, 4418000, 3743000,
                3525000, 5276000, 8822000, 5394000, 3234000, 4439000, 3176000, 1637000, 4111000, 7059000,
                4039000, 3190000, 2896000, 2642000, 5454000, 4172000, 5432000, 7803000, 3271000, 3714000, 3097000
            ],
            // Februari 2024 (29 hari - tahun kabisat)
            '2024-02' => [
                3613000, 4973000, 7497000, 3359000, 2979000, 3876000, 3956000, 6839000, 9863000, 10822000,
                3663000, 2252000, 2330000, 2024506, 1428000, 3212000, 7785000, 4937000, 2899000, 3441000,
                5181000, 6494000, 6968000, 8002000, 1959000, 2891000, 2487000, 3250000, 4618000
            ],
            // Maret 2024 (31 hari)
            '2024-03' => [
                4693000, 8078000, 7012000, 3103000, 2240000, 2916500, 4144000, 10814000, 6675000, 4946000,
                2789000, 1245000, 1236000, 1935000, 2022000, 4428000, 2538000, 1357000, 2918000, 3022000,
                3541000, 1930000, 8981000, 2997000, 3049000, 4492000, 1643000, 1059000, 3214000, 3736000, 3243000
            ],
            // April 2024 (30 hari)
            '2024-04' => [
                1498000, 1582000, 2245000, 3211000, 2812000, 2486000, 4585000, 3419000, 5161000, 5342000,
                7960000, 8078000, 7142000, 6343000, 4357000, 3402000, 2447000, 2768000, 2172000, 7180000,
                3513000, 5829000, 2585000, 4199000, 6702000, 4600000, 7714000, 4425000, 8461000, 2918000
            ],
            // Mei 2024 (31 hari, data hanya 27 hari, sisanya tidak ada transaksi)
            '2024-05' => [
                2681000, 3385000, 4004000, 5213000, 10123400, 8710000, 8002000, 4908000, 3731000, 4516000,
                5150000, 4483000, 6378000, 7578000, 2637000, 3323000, 3226000, 4518000, 6229000, 7136000,
                7073000, 6169000, 3241000, 3957000, 3053000, 2977000, 4297000
                // Tanggal 28-31 Mei tidak ada transaksi
            ],
            // Juni 2024 (30 hari)
            '2024-06' => [
                5514000, 5366000, 4203000, 4474000, 3790000, 4116000, 3987000, 6901000, 5082000, 3605000,
                6248000, 5102000, 5024250, 5964200, 5378400, 6458100, 6416400, 3922300, 2885200, 4128800,
                5700800, 6174400, 3230200, 4889000, 4252400, 3827300, 5569700, 5747700, 7604000, 7778900
            ],
            // Juli 2024 (31 hari)
            '2024-07' => [
                3500250, 3959000, 4901999, 5601500, 5361000, 10549750, 6489800, 4120300, 5209500, 5663750,
                4639700, 5502150, 6007500, 4853850, 3759000, 3130250, 2864050, 5748750, 4398000, 8751500,
                6289275, 3707450, 4542000, 3137250, 2892000, 4201500, 7793000, 5265650, 9262100, 3649000, 4584000
            ],
            // Agustus 2024 (31 hari)
            '2024-08' => [
                5339000, 6549000, 7558500, 5792500, 3229210, 3715060, 4028550, 4530280, 5600500, 8861900,
                5121000, 3398520, 3366210, 3597550, 4184510, 3947000, 10222500, 6748000, 2589350, 3775800,
                2724200, 3469070, 5004650, 9478500, 4194000, 5134000, 4664000, 4728500, 4049000, 9796600, 8287000
            ],
            // September 2024 (30 hari)
            '2024-09' => [
                6851000, 3938000, 4688500, 4915000, 3994000, 5786900, 15408000, 6261000, 2852000, 7718250,
                4835000, 3970000, 6363500, 10583000, 10065000, 5017000, 6824500, 5114000, 2433000, 6036800,
                9676000, 6652500, 2945000, 5184200, 4020000, 4903000, 4745000, 9236550, 4699000, 4546000
            ],
            // Oktober 2024 (31 hari)
            '2024-10' => [
                5315200, 3838500, 5004000, 4638000, 8898800, 6377000, 10963500, 3730000, 6603150, 9344650,
                7071000, 7565000, 5707000, 2775000, 5664250, 2415000, 6577000, 5559000, 8229000, 4430000,
                3549000, 4542950, 3610000, 5796450, 4398950, 9488050, 6002300, 3504000, 6279000, 3394000, 5272000
            ],
            // November 2024 (30 hari)
            '2024-11' => [
                4233500, 7879000, 4805000, 2915500, 5103500, 3104500, 4491000, 5928500, 6417000, 7298000,
                5388000, 5142500, 3043000, 4489000, 8931000, 5574500, 5161500, 3362000, 7566000, 4085000,
                4210000, 5292000, 9031000, 6578500, 5065000, 4411000, 3843000, 2177000, 5814000, 6859500
            ],
            // Desember 2024 (31 hari)
            '2024-12' => [
                8817500, 8328000, 4993000, 5815000, 3360000, 5064500, 9035000, 8390000, 5574000, 6578500,
                6396000, 7526000, 6410000, 9165000, 7007000, 12238000, 4488500, 5884500, 4713500, 5209000,
                8431000, 6274000, 7672000, 5330500, 9254000, 6526500, 8336000, 9245000, 7822500, 7346000, 19511000
            ],
            // Januari 2025 (31 hari)
            '2025-01' => [
                7110000, 6786000, 7879000, 9437000, 4503000, 3707000, 4774000, 5321000, 6709000, 3712000,
                5833000, 6380000, 2832000, 4506000, 4433000, 3729000, 5979000, 6556000, 5556000, 5116000,
                2514000, 7273800, 4941000, 4702000, 9124000, 10893000, 10379000, 9663000, 4319000, 3714000, 5771000
            ],
            // Februari 2025 (28 hari)
            '2025-02' => [
                9346000, 5114000, 2634000, 4760000, 5047000, 4761000, 5372000, 5754000, 5335000, 3786000,
                3808000, 4077000, 5924000, 7070000, 9691000, 10432900, 4089000, 6040000, 8157000, 9448000,
                8491000, 11154900, 7152000, 3974900, 5840050, 5504900, 8215250, 7811600
            ],
            // Maret 2025 (31 hari)
            '2025-03' => [
                4271000, 2733000, 3852000, 4213000, 4561000, 4316000, 6341000, 5141000, 6445750, 4354000,
                5799000, 6472000, 6930150, 7534000, 8038000, 7918000, 6517000, 8458000, 6517250, 6794000,
                7663500, 7791000, 8073000, 7728000, 5915000, 7538000, 5865000, 6744000, 7768000, 6247000, 6645000
            ],
            // April 2025 (30 hari)
            '2025-04' => [
                9390000, 12409000, 12410000, 14745250, 11524000, 8886000, 6897000, 5799000, 5581000, 3380000,
                5329000, 10309000, 8876000, 3850250, 7500000, 6939000, 6346000, 9729250, 14093000, 8623000,
                5859000, 4538000, 4927000, 5602000, 8184000, 11310000, 9236000, 5493000, 5945000, 5349000
            ],
            // Mei 2025 (31 hari)
            '2025-05' => [
                6563600, 6103900, 12184000, 7535000, 5538900, 5977800, 6420000, 10291000, 7583700, 10445500,
                15426050, 12539000, 8432700, 4462000, 5464600, 7834050, 10325000, 5879000, 5447350, 4812000,
                4845100, 5218000, 5102600, 11252600, 6319000, 4787100, 6159100, 6128000, 11568962, 10928850, 10744100
            ],
            // Juni 2025 (30 hari)
            '2025-06' => [
                7915680, 8769490, 5481000, 7635000, 4347000, 5647000, 9997900, 7815900, 5555200, 3623050,
                6408550, 7486500, 15849000, 5983200, 8263850, 4341900, 6367000, 6343700, 6333700, 5644000,
                12498450, 6107500, 7843900, 6196600, 8516050, 7247200, 12121700, 13093200, 10313000, 7476400
                // Data 10135000 tidak dimasukkan karena Juni hanya 30 hari
            ],
            // Juli 2025 (31 hari)
            '2025-07' => [
                8093000, 8501700, 8527950, 9226000, 14052550, 10566750, 7839000, 9311900, 5861550, 7684000,
                6828350, 7278000, 7139400, 3752600, 5129250, 5955952, 4566000, 8517000, 10727000, 8843100,
                5287900, 5889000, 5081250, 5727200, 8066300, 13196500, 15478500, 8773150, 4929000, 6650100, 10135000
            ],
            // Agustus 2025 (31 hari, data hanya sampai tanggal 28)
            '2025-08' => [
                9566000, 12340100, 10506000, 5999700, 6380400, 8742300, 8117350, 8512000, 14722750, 11579300,
                6818000, 5678000, 6843200, 5955600, 9615750, 10325000, 12502000, 10415500, 5991000, 6514500,
                8159250, 8662850, 13127500, 11580000, 6245500, 7923000, 7660750, 9099450
                // Tanggal 29-31 Agustus tidak ada transaksi (data hanya sampai tanggal 28)
            ]
        ];

        // Insert data transaksi
        foreach ($nyoreData as $monthYear => $amounts) {
            $year = substr($monthYear, 0, 4);
            $month = substr($monthYear, 5, 2);
            
            // Get the number of days in the month
            $daysInMonth = Carbon::createFromDate($year, $month, 1)->daysInMonth;
            
            // Loop through each amount in the array
            foreach ($amounts as $index => $amount) {
                $dayNumber = $index + 1; // Convert 0-based index to 1-based day (index 0 = tanggal 1)
                
                // Only create if the day exists in the month
                if ($dayNumber <= $daysInMonth) {
                    $date = Carbon::createFromDate($year, $month, $dayNumber);
                    
                    Transaksi::create([
                        'tanggal' => $date->format('Y-m-d'),
                        'brand' => 'Nyore', // Changed from 'Nyore Nyante' to 'Nyore'
                        'nominal' => $amount
                    ]);
                }
            }
            
            // Note: Jika jumlah data amounts < jumlah hari dalam bulan,
            // maka tanggal setelahnya akan kosong (tidak ada transaksi)
        }

        $this->command->info('Nyore transaction data seeded successfully!');
        $this->command->info('Total transactions created: ' . Transaksi::where('brand', 'Nyore')->count());
    }
}
